{"ast":null,"code":"import _slicedToArray from \"/Users/michellezyman/Projects/prody/prody-master/prody_fe/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/michellezyman/Projects/prody/prody-master/prody_fe/src/Console/Surveys/SearchBar.js\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport { ConsoleContext } from '../ConsoleContext';\nimport './SearchBar.css';\nimport { useFetch } from \"../../utils/Hook\";\nimport Dropdown from \"../../componenets/Dropdown\";\nimport { useHistory } from \"react-router-dom\";\nimport authHeader from \"../../utils/auth-header\";\nimport { CONSTANTS } from '../../utils/constants';\n\nconst SearchBar = () => {\n  const _useContext = useContext(ConsoleContext),\n        categoryContext = _useContext.categoryContext,\n        surveyContext = _useContext.surveyContext,\n        setSurveyContext = _useContext.setSurveyContext;\n\n  const _useState = useState('1'),\n        _useState2 = _slicedToArray(_useState, 2),\n        surveyFilter = _useState2[0],\n        setSurveyFilter = _useState2[1];\n\n  const _useFetch = useFetch({\n    url: `${CONSTANTS.URL_PREFIX}://prody.me/api/product_page_product_dropdown/${categoryContext}/${surveyFilter}`,\n    header: authHeader(),\n    method: 'GET',\n    dep1: surveyFilter\n  }),\n        data = _useFetch.data,\n        loading = _useFetch.loading; //const surveysArray = () => {\n  // if (!loading) {\n  //   return data.map((item) => {\n  //      return {value: item.barcode, displayValue: item.barcode_desc_eng}\n  //  });\n  // } else {return ''}\n  //  };\n  // console.log(`searchBar: productContext: ${productContext} market: ${marketContext} productFilter: ${productFilter}`);\n  // console.log('searchBar - product  ' + product);\n\n\n  const history = useHistory();\n\n  const updateURL = survey => {\n    history.push(`/productpage/${categoryContext}/${survey}`);\n  };\n\n  return React.createElement(\"div\", {\n    className: \"searchBarContainer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"searchBar_dropdown\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"searchBar_dropdown\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, React.createElement(Dropdown, {\n    listArray: surveysArray(),\n    title: \"Surveys\",\n    loading: loading,\n    selectionValueHandler: setSurveyContext,\n    useDisplayValue: false,\n    filterHandler: setSurveyFilter,\n    defultValue: surveyContext,\n    updateURL: updateURL,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  })));\n};\n\nexport default SearchBar;","map":{"version":3,"sources":["/Users/michellezyman/Projects/prody/prody-master/prody_fe/src/Console/Surveys/SearchBar.js"],"names":["React","useContext","useEffect","useState","ConsoleContext","useFetch","Dropdown","useHistory","authHeader","CONSTANTS","SearchBar","categoryContext","surveyContext","setSurveyContext","surveyFilter","setSurveyFilter","url","URL_PREFIX","header","method","dep1","data","loading","history","updateURL","survey","push","surveysArray"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,UAAf,EAA2BC,SAA3B,EAAsCC,QAAtC,QAAqD,OAArD;AAEA,SAASC,cAAT,QAA+B,mBAA/B;AACA,OAAO,iBAAP;AACA,SAAQC,QAAR,QAAuB,kBAAvB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,UAAP,MAAuB,yBAAvB;AACA,SAAQC,SAAR,QAAwB,uBAAxB;;AAEA,MAAMC,SAAS,GAAG,MAAM;AAAA,sBAEwCT,UAAU,CAACG,cAAD,CAFlD;AAAA,QAEZO,eAFY,eAEZA,eAFY;AAAA,QAEKC,aAFL,eAEKA,aAFL;AAAA,QAEoBC,gBAFpB,eAEoBA,gBAFpB;;AAAA,oBAGoBV,QAAQ,CAAC,GAAD,CAH5B;AAAA;AAAA,QAGbW,YAHa;AAAA,QAGCC,eAHD;;AAAA,oBAIMV,QAAQ,CAAC;AAACW,IAAAA,GAAG,EAAG,GAAEP,SAAS,CAACQ,UAAW,iDAAgDN,eAAgB,IAAGG,YAAa,EAA9G;AAC/BI,IAAAA,MAAM,EAAEV,UAAU,EADa;AAE/BW,IAAAA,MAAM,EAAE,KAFuB;AAG/BC,IAAAA,IAAI,EAAEN;AAHyB,GAAD,CAJd;AAAA,QAIZO,IAJY,aAIZA,IAJY;AAAA,QAINC,OAJM,aAINA,OAJM,EASpB;AACG;AACE;AACC;AACA;AACH;AACL;AAEE;AACA;;;AAEA,QAAMC,OAAO,GAAGhB,UAAU,EAA1B;;AAEA,QAAMiB,SAAS,GAAIC,MAAD,IAAY;AAC1BF,IAAAA,OAAO,CAACG,IAAR,CAAc,gBAAef,eAAgB,IAAGc,MAAO,EAAvD;AACH,GAFD;;AAIA,SACI;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAGI;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,QAAD;AACI,IAAA,SAAS,EAAEE,YAAY,EAD3B;AAEI,IAAA,KAAK,EAAC,SAFV;AAGI,IAAA,OAAO,EAAEL,OAHb;AAII,IAAA,qBAAqB,EAAET,gBAJ3B;AAKI,IAAA,eAAe,EAAE,KALrB;AAMI,IAAA,aAAa,EAAEE,eANnB;AAOI,IAAA,WAAW,EAAEH,aAPjB;AAQI,IAAA,SAAS,EAAEY,SARf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAHJ,CADJ;AAiBH,CA3CD;;AA6CA,eAAed,SAAf","sourcesContent":["import React, {useContext, useEffect, useState} from 'react';\n\nimport { ConsoleContext } from '../ConsoleContext';\nimport './SearchBar.css'\nimport {useFetch} from \"../../utils/Hook\";\nimport Dropdown from \"../../componenets/Dropdown\";\nimport { useHistory } from \"react-router-dom\";\nimport authHeader from \"../../utils/auth-header\";\nimport {CONSTANTS} from '../../utils/constants';\n\nconst SearchBar = () => {\n\n    const { categoryContext, surveyContext, setSurveyContext} = useContext(ConsoleContext);\n    const [surveyFilter, setSurveyFilter] = useState('1');\n    const { data, loading } = useFetch({url: `${CONSTANTS.URL_PREFIX}://prody.me/api/product_page_product_dropdown/${categoryContext}/${surveyFilter}`,\n        header: authHeader(),\n        method: 'GET',\n        dep1: surveyFilter});\n\n    //const surveysArray = () => {\n       // if (!loading) {\n         //   return data.map((item) => {\n          //      return {value: item.barcode, displayValue: item.barcode_desc_eng}\n          //  });\n       // } else {return ''}\n  //  };\n\n    // console.log(`searchBar: productContext: ${productContext} market: ${marketContext} productFilter: ${productFilter}`);\n    // console.log('searchBar - product  ' + product);\n\n    const history = useHistory();\n\n    const updateURL = (survey) => {\n        history.push(`/productpage/${categoryContext}/${survey}`);\n    };\n\n    return (\n        <div className=\"searchBarContainer\">\n            <div className=\"searchBar_dropdown\">\n            </div>\n            <div className=\"searchBar_dropdown\">\n                <Dropdown\n                    listArray={surveysArray()}\n                    title='Surveys'\n                    loading={loading}\n                    selectionValueHandler={setSurveyContext}\n                    useDisplayValue={false}\n                    filterHandler={setSurveyFilter}\n                    defultValue={surveyContext}\n                    updateURL={updateURL}/>\n            </div>\n        </div>\n    );\n};\n\nexport default SearchBar;"]},"metadata":{},"sourceType":"module"}