{"ast":null,"code":"import _slicedToArray from\"/Users/shahafdan/Documents/BostonU/TAMID/prody/prody-master/prody_fe/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from'react';import{ConsoleContext}from'../ConsoleContext';import'./SearchBar.css';import{useFetch}from\"../../utils/Hook\";import Dropdown from\"../../componenets/Dropdown\";import{useHistory}from\"react-router-dom\";import authHeader from\"../../utils/auth-header\";import{CONSTANTS}from'../../utils/constants';var SearchBar=function SearchBar(){var _useContext=useContext(ConsoleContext),marketContext=_useContext.marketContext,productContext=_useContext.productContext,setProductContext=_useContext.setProductContext;var _useState=useState('1'),_useState2=_slicedToArray(_useState,2),productFilter=_useState2[0],setProductFilter=_useState2[1];var _useFetch=useFetch({url:\"\".concat(CONSTANTS.URL_PREFIX,\"://prody.me/api/product_page_product_dropdown/\").concat(marketContext,\"/\").concat(productFilter),header:authHeader(),method:'GET',dep1:productFilter}),data=_useFetch.data,loading=_useFetch.loading;var productsArray=function productsArray(){if(!loading){return data.map(function(item){return{value:item.barcode,displayValue:item.barcode_desc_eng};});}else{return'';}};// console.log(`searchBar: productContext: ${productContext} market: ${marketContext} productFilter: ${productFilter}`);\n// console.log('searchBar - product  ' + product);\nvar history=useHistory();var updateURL=function updateURL(product){history.push(\"/productpage/\".concat(marketContext,\"/\").concat(product));};return React.createElement(\"div\",{className:\"searchBarContainer\"},React.createElement(\"div\",{className:\"searchBar_dropdown\"}),React.createElement(\"div\",{className:\"searchBar_dropdown\"},React.createElement(Dropdown,{listArray:productsArray(),title:\"Product\",loading:loading,selectionValueHandler:setProductContext,useDisplayValue:false,filterHandler:setProductFilter,defultValue:productContext,updateURL:updateURL})));};export default SearchBar;","map":{"version":3,"sources":["/Users/shahafdan/Documents/BostonU/TAMID/prody/prody-master/prody_fe/src/Console/ProductPage/SearchBar.js"],"names":["React","useContext","useEffect","useState","ConsoleContext","useFetch","Dropdown","useHistory","authHeader","CONSTANTS","SearchBar","marketContext","productContext","setProductContext","productFilter","setProductFilter","url","URL_PREFIX","header","method","dep1","data","loading","productsArray","map","item","value","barcode","displayValue","barcode_desc_eng","history","updateURL","product","push"],"mappings":"uJAAA,MAAOA,CAAAA,KAAP,EAAeC,UAAf,CAA2BC,SAA3B,CAAsCC,QAAtC,KAAqD,OAArD,CAEA,OAASC,cAAT,KAA+B,mBAA/B,CACA,MAAO,iBAAP,CACA,OAAQC,QAAR,KAAuB,kBAAvB,CACA,MAAOC,CAAAA,QAAP,KAAqB,4BAArB,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,UAAP,KAAuB,yBAAvB,CACA,OAAQC,SAAR,KAAwB,uBAAxB,CAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,iBAEwCT,UAAU,CAACG,cAAD,CAFlD,CAEZO,aAFY,aAEZA,aAFY,CAEGC,cAFH,aAEGA,cAFH,CAEmBC,iBAFnB,aAEmBA,iBAFnB,eAGsBV,QAAQ,CAAC,GAAD,CAH9B,wCAGbW,aAHa,eAGEC,gBAHF,6BAIMV,QAAQ,CAAC,CAACW,GAAG,WAAKP,SAAS,CAACQ,UAAf,0DAA0EN,aAA1E,aAA2FG,aAA3F,CAAJ,CAC/BI,MAAM,CAAEV,UAAU,EADa,CAE/BW,MAAM,CAAE,KAFuB,CAG/BC,IAAI,CAAEN,aAHyB,CAAD,CAJd,CAIZO,IAJY,WAIZA,IAJY,CAINC,OAJM,WAINA,OAJM,CASpB,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CACxB,GAAI,CAACD,OAAL,CAAc,CACV,MAAOD,CAAAA,IAAI,CAACG,GAAL,CAAS,SAACC,IAAD,CAAU,CACtB,MAAO,CAACC,KAAK,CAAED,IAAI,CAACE,OAAb,CAAsBC,YAAY,CAAEH,IAAI,CAACI,gBAAzC,CAAP,CACH,CAFM,CAAP,CAGH,CAJD,IAIO,CAAC,MAAO,EAAP,CAAU,CACrB,CAND,CAQA;AACA;AAEA,GAAMC,CAAAA,OAAO,CAAGvB,UAAU,EAA1B,CAEA,GAAMwB,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,OAAD,CAAa,CAC3BF,OAAO,CAACG,IAAR,wBAA6BtB,aAA7B,aAA8CqB,OAA9C,GACH,CAFD,CAIA,MACI,4BAAK,SAAS,CAAC,oBAAf,EACI,2BAAK,SAAS,CAAC,oBAAf,EADJ,CAGI,2BAAK,SAAS,CAAC,oBAAf,EACI,oBAAC,QAAD,EACI,SAAS,CAAET,aAAa,EAD5B,CAEI,KAAK,CAAC,SAFV,CAGI,OAAO,CAAED,OAHb,CAII,qBAAqB,CAAET,iBAJ3B,CAKI,eAAe,CAAE,KALrB,CAMI,aAAa,CAAEE,gBANnB,CAOI,WAAW,CAAEH,cAPjB,CAQI,SAAS,CAAEmB,SARf,EADJ,CAHJ,CADJ,CAiBH,CA3CD,CA6CA,cAAerB,CAAAA,SAAf","sourcesContent":["import React, {useContext, useEffect, useState} from 'react';\n\nimport { ConsoleContext } from '../ConsoleContext';\nimport './SearchBar.css'\nimport {useFetch} from \"../../utils/Hook\";\nimport Dropdown from \"../../componenets/Dropdown\";\nimport { useHistory } from \"react-router-dom\";\nimport authHeader from \"../../utils/auth-header\";\nimport {CONSTANTS} from '../../utils/constants';\n\nconst SearchBar = () => {\n\n    const { marketContext, productContext, setProductContext} = useContext(ConsoleContext);\n    const [productFilter, setProductFilter] = useState('1');\n    const { data, loading } = useFetch({url: `${CONSTANTS.URL_PREFIX}://prody.me/api/product_page_product_dropdown/${marketContext}/${productFilter}`,\n        header: authHeader(),\n        method: 'GET',\n        dep1: productFilter});\n\n    const productsArray = () => {\n        if (!loading) {\n            return data.map((item) => {\n                return {value: item.barcode, displayValue: item.barcode_desc_eng}\n            });\n        } else {return ''}\n    };\n\n    // console.log(`searchBar: productContext: ${productContext} market: ${marketContext} productFilter: ${productFilter}`);\n    // console.log('searchBar - product  ' + product);\n\n    const history = useHistory();\n\n    const updateURL = (product) => {\n        history.push(`/productpage/${marketContext}/${product}`);\n    };\n\n    return (\n        <div className=\"searchBarContainer\">\n            <div className=\"searchBar_dropdown\">\n            </div>\n            <div className=\"searchBar_dropdown\">\n                <Dropdown\n                    listArray={productsArray()}\n                    title='Product'\n                    loading={loading}\n                    selectionValueHandler={setProductContext}\n                    useDisplayValue={false}\n                    filterHandler={setProductFilter}\n                    defultValue={productContext}\n                    updateURL={updateURL}/>\n            </div>\n        </div>\n    );\n};\n\nexport default SearchBar;"]},"metadata":{},"sourceType":"module"}