{"ast":null,"code":"import React,{useContext}from'react';import'./BetterProducts.css';import{ConsoleContext}from\"../ConsoleContext\";import{useFetch}from'../../utils/Hook';import _ from\"lodash\";import Table from\"../../componenets/Table\";import NoData from\"../../componenets/NoData\";import Loader from'../../componenets/Loader';import authHeader from\"../../utils/auth-header\";import{CONSTANTS}from'../../utils/constants';var BetterProducts=function BetterProducts(){var _useContext=useContext(ConsoleContext),marketContext=_useContext.marketContext,productContext=_useContext.productContext,languageContext=_useContext.languageContext;var _useFetch=useFetch({url:\"\".concat(CONSTANTS.URL_PREFIX,\"://prody.me/api/product_page_score_and_better_products/\").concat(marketContext,\"/\").concat(productContext),header:authHeader(),method:'GET',dep1:productContext}),data=_useFetch.data,loading=_useFetch.loading;var rowClickHandle=function rowClickHandle(barcode){window.open(\"/productpage/ISR/\".concat(barcode),\"_blank\");};var title=function title(){if(languageContext==='ENG'){return React.createElement(\"div\",{style:{'fontWeight':'bold'}},\"Healthier Products\");}else if(languageContext==='HEB'){return React.createElement(\"div\",{style:{'fontWeight':'bold'}},\"\\u05DE\\u05D5\\u05E6\\u05E8\\u05D9\\u05DD \\u05D1\\u05E8\\u05D9\\u05D0\\u05D9\\u05DD \\u05D9\\u05D5\\u05EA\\u05E8\");}};var rows=function rows(){if(!loading&&languageContext==='ENG'){var sortedData=_.sortBy(data,[function(item){return-parseInt(item.better_score,10);},function(item){return item.better_brand_eng;}]);return sortedData.map(function(row,index){return React.createElement(\"tr\",{className:\"Table_row_clickable\",key:index,onClick:function onClick(){return rowClickHandle(row.better_barcode);}},React.createElement(\"td\",null,row.better_desc_eng),React.createElement(\"td\",null,row.better_quantity+' '+row.better_uom_eng,\" \"),React.createElement(\"td\",null,row.better_brand_eng),React.createElement(\"td\",{className:\"numeric_value\"},row.better_score));});}else if(!loading&&languageContext==='HEB'){var _sortedData=_.sortBy(data,[function(item){return-parseInt(item.better_score,10);},function(item){return item.better_brand_heb;}]);return _sortedData.map(function(row,index){return React.createElement(\"tr\",{className:\"Table_row_clickable\",key:index,onClick:function onClick(){return rowClickHandle(row.better_barcode);}},React.createElement(\"td\",{dir:\"rtl\"},row.better_desc_heb),React.createElement(\"td\",{dir:\"rtl\"},row.better_quantity+' '+row.better_uom_heb,\" \"),React.createElement(\"td\",{dir:\"rtl\"},row.better_brand_heb),React.createElement(\"td\",{className:\"numeric_value\"},row.better_score));});}};var tableHead=function tableHead(){if(languageContext==='ENG'){return React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"Label\"),React.createElement(\"th\",null,\"Quantity\"),React.createElement(\"th\",null,\"Brand\"),React.createElement(\"th\",null,\"Score\")));}else if(languageContext==='HEB'){return React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"\\u05E9\\u05DD\"),React.createElement(\"th\",null,\"\\u05DB\\u05DE\\u05D5\\u05EA\"),React.createElement(\"th\",null,\"\\u05DE\\u05D5\\u05EA\\u05D2\"),React.createElement(\"th\",null,\"\\u05E6\\u05D9\\u05D5\\u05DF\")));}};var content=function content(){if(loading){return React.createElement(Loader,null);}else if(!data.length){return React.createElement(NoData,null);}else{return React.createElement(React.Fragment,null,React.createElement(Table,null,React.createElement(\"table\",null,tableHead(),React.createElement(\"tbody\",null,rows()))));}};return React.createElement(\"div\",{className:\"betterProductsContainer\"},title(),React.createElement(\"div\",{className:\"betterProductsContent\"},content()));};export default BetterProducts;","map":{"version":3,"sources":["/Users/shahafdan/Documents/BostonU/TAMID/prody/prody-master/prody_fe/src/Console/ProductPage/BetterProducts.js"],"names":["React","useContext","ConsoleContext","useFetch","_","Table","NoData","Loader","authHeader","CONSTANTS","BetterProducts","marketContext","productContext","languageContext","url","URL_PREFIX","header","method","dep1","data","loading","rowClickHandle","barcode","window","open","title","rows","sortedData","sortBy","item","parseInt","better_score","better_brand_eng","map","row","index","better_barcode","better_desc_eng","better_quantity","better_uom_eng","better_brand_heb","better_desc_heb","better_uom_heb","tableHead","content","length"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,EAAeC,UAAf,KAAgC,OAAhC,CAEA,MAAO,sBAAP,CACA,OAAQC,cAAR,KAA6B,mBAA7B,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,CACA,MAAOC,CAAAA,KAAP,KAAkB,yBAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,UAAP,KAAuB,yBAAvB,CACA,OAAQC,SAAR,KAAwB,uBAAxB,CAEA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,iBAEkCT,UAAU,CAACC,cAAD,CAF5C,CAEjBS,aAFiB,aAEjBA,aAFiB,CAEFC,cAFE,aAEFA,cAFE,CAEcC,eAFd,aAEcA,eAFd,eAGAV,QAAQ,CAAC,CAACW,GAAG,WAAIL,SAAS,CAACM,UAAd,mEAAkFJ,aAAlF,aAAmGC,cAAnG,CAAJ,CAC9BI,MAAM,CAAER,UAAU,EADY,CAE9BS,MAAM,CAAE,KAFsB,CAG9BC,IAAI,CAAEN,cAHwB,CAAD,CAHR,CAGjBO,IAHiB,WAGjBA,IAHiB,CAGXC,OAHW,WAGXA,OAHW,CAQzB,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,OAAD,CAAa,CAChCC,MAAM,CAACC,IAAP,4BAAgCF,OAAhC,EAA2C,QAA3C,EACH,CAFD,CAIA,GAAMG,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,EAAM,CAClB,GAAIZ,eAAe,GAAK,KAAxB,CAA+B,CAAC,MAAO,4BAAK,KAAK,CAAE,CAAC,aAAc,MAAf,CAAZ,uBAAP,CAAoE,CAApG,IACK,IAAIA,eAAe,GAAK,KAAxB,CAA+B,CAAC,MAAO,4BAAK,KAAK,CAAE,CAAC,aAAc,MAAf,CAAZ,uGAAP,CAAoE,CAC1G,CAHD,CAKA,GAAMa,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,EAAM,CACf,GAAG,CAACN,OAAD,EAAYP,eAAe,GAAK,KAAnC,CAA0C,CACtC,GAAMc,CAAAA,UAAU,CAAGvB,CAAC,CAACwB,MAAF,CAAST,IAAT,CAAe,CAC9B,SAACU,IAAD,CAAU,CAAC,MAAO,CAACC,QAAQ,CAACD,IAAI,CAACE,YAAN,CAAoB,EAApB,CAAhB,CAAwC,CADrB,CAE9B,SAACF,IAAD,CAAU,CAAC,MAAOA,CAAAA,IAAI,CAACG,gBAAZ,CAA6B,CAFV,CAAf,CAAnB,CAGA,MAAOL,CAAAA,UAAU,CAACM,GAAX,CAAe,SAACC,GAAD,CAAMC,KAAN,CAAgB,CAC9B,MACI,2BAAI,SAAS,CAAC,qBAAd,CAAoC,GAAG,CAAEA,KAAzC,CAAgD,OAAO,CAAE,yBAAId,CAAAA,cAAc,CAACa,GAAG,CAACE,cAAL,CAAlB,EAAzD,EACI,8BAAKF,GAAG,CAACG,eAAT,CADJ,CAEI,8BAAKH,GAAG,CAACI,eAAJ,CAAsB,GAAtB,CAA4BJ,GAAG,CAACK,cAArC,KAFJ,CAGI,8BAAKL,GAAG,CAACF,gBAAT,CAHJ,CAII,0BAAI,SAAS,CAAC,eAAd,EAA+BE,GAAG,CAACH,YAAnC,CAJJ,CADJ,CAQE,CATH,CAAP,CAUH,CAdD,IAeS,IAAG,CAACX,OAAD,EAAYP,eAAe,GAAK,KAAnC,CAA0C,CAC3C,GAAMc,CAAAA,WAAU,CAAGvB,CAAC,CAACwB,MAAF,CAAST,IAAT,CAAe,CAC9B,SAACU,IAAD,CAAU,CAAC,MAAO,CAACC,QAAQ,CAACD,IAAI,CAACE,YAAN,CAAoB,EAApB,CAAhB,CAAwC,CADrB,CAE9B,SAACF,IAAD,CAAU,CAAC,MAAOA,CAAAA,IAAI,CAACW,gBAAZ,CAA6B,CAFV,CAAf,CAAnB,CAGA,MAAOb,CAAAA,WAAU,CAACM,GAAX,CAAe,SAACC,GAAD,CAAMC,KAAN,CAAgB,CAClC,MACI,2BAAI,SAAS,CAAC,qBAAd,CAAoC,GAAG,CAAEA,KAAzC,CAAgD,OAAO,CAAE,yBAAId,CAAAA,cAAc,CAACa,GAAG,CAACE,cAAL,CAAlB,EAAzD,EACI,0BAAI,GAAG,CAAC,KAAR,EAAeF,GAAG,CAACO,eAAnB,CADJ,CAEI,0BAAI,GAAG,CAAC,KAAR,EAAeP,GAAG,CAACI,eAAJ,CAAsB,GAAtB,CAA4BJ,GAAG,CAACQ,cAA/C,KAFJ,CAGI,0BAAI,GAAG,CAAC,KAAR,EAAeR,GAAG,CAACM,gBAAnB,CAHJ,CAII,0BAAI,SAAS,CAAC,eAAd,EAA+BN,GAAG,CAACH,YAAnC,CAJJ,CADJ,CAQE,CATC,CAAP,CAUH,CACR,CA/BD,CAiCA,GAAMY,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACpB,GAAI9B,eAAe,GAAK,KAAxB,CAA+B,CAC3B,MACI,kCACA,8BACI,sCADJ,CAEI,yCAFJ,CAGI,sCAHJ,CAII,sCAJJ,CADA,CADJ,CAUH,CAXD,IAWO,IAAIA,eAAe,GAAK,KAAxB,CAA+B,CAClC,MACI,kCACA,8BACI,6CADJ,CAEI,yDAFJ,CAGI,yDAHJ,CAII,yDAJJ,CADA,CADJ,CAUH,CACJ,CAxBD,CA0BA,GAAM+B,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CAClB,GAAGxB,OAAH,CAAY,CAAC,MAAQ,qBAAC,MAAD,MAAR,CAAmB,CAAhC,IACK,IAAI,CAACD,IAAI,CAAC0B,MAAV,CAAkB,CAAC,MAAQ,qBAAC,MAAD,MAAR,CAAmB,CAAtC,IACA,CACD,MACI,yCACA,oBAAC,KAAD,MACI,iCACKF,SAAS,EADd,CAEI,iCACCjB,IAAI,EADL,CAFJ,CADJ,CADA,CADJ,CAYH,CACJ,CAjBD,CAmBA,MACI,4BAAK,SAAS,CAAC,yBAAf,EACKD,KAAK,EADV,CAEI,2BAAK,SAAS,CAAC,uBAAf,EAAwCmB,OAAO,EAA/C,CAFJ,CADJ,CAMH,CArGD,CAuGA,cAAelC,CAAAA,cAAf","sourcesContent":["import React, {useContext} from 'react';\n\nimport './BetterProducts.css';\nimport {ConsoleContext} from \"../ConsoleContext\";\nimport { useFetch } from '../../utils/Hook';\nimport _ from \"lodash\";\nimport Table from \"../../componenets/Table\";\nimport NoData from \"../../componenets/NoData\";\nimport Loader from '../../componenets/Loader';\nimport authHeader from \"../../utils/auth-header\";\nimport {CONSTANTS} from '../../utils/constants';\n\nconst BetterProducts = () => {\n\n    const { marketContext, productContext, languageContext } = useContext(ConsoleContext);\n    const { data, loading} = useFetch({url:`${CONSTANTS.URL_PREFIX}://prody.me/api/product_page_score_and_better_products/${marketContext}/${productContext}`,\n        header: authHeader(),\n        method: 'GET',\n        dep1: productContext});\n\n    const rowClickHandle = (barcode) => {\n        window.open(`/productpage/ISR/${barcode}`, \"_blank\")\n    };\n\n    const title = () => {\n      if (languageContext === 'ENG') {return <div style={{'fontWeight': 'bold'}}>Healthier Products</div>}\n      else if (languageContext === 'HEB') {return <div style={{'fontWeight': 'bold'}}>מוצרים בריאים יותר</div>}\n    };\n\n    const rows = () => {\n        if(!loading && languageContext === 'ENG') {\n            const sortedData = _.sortBy(data, [\n                (item) => {return -parseInt(item.better_score, 10)},\n                (item) => {return item.better_brand_eng}]);\n            return sortedData.map((row, index) => {\n                    return (\n                        <tr className=\"Table_row_clickable\" key={index} onClick={()=>rowClickHandle(row.better_barcode)}>\n                            <td>{row.better_desc_eng}</td>\n                            <td>{row.better_quantity + ' ' + row.better_uom_eng} </td>\n                            <td>{row.better_brand_eng}</td>\n                            <td className=\"numeric_value\">{row.better_score}</td>\n                        </tr>\n\n                    )})\n        }\n            else if(!loading && languageContext === 'HEB') {\n                const sortedData = _.sortBy(data, [\n                    (item) => {return -parseInt(item.better_score, 10)},\n                    (item) => {return item.better_brand_heb}]);\n                return sortedData.map((row, index) => {\n                    return (\n                        <tr className=\"Table_row_clickable\" key={index} onClick={()=>rowClickHandle(row.better_barcode)}>\n                            <td dir='rtl'>{row.better_desc_heb}</td>\n                            <td dir='rtl'>{row.better_quantity + ' ' + row.better_uom_heb} </td>\n                            <td dir='rtl'>{row.better_brand_heb}</td>\n                            <td className=\"numeric_value\">{row.better_score}</td>\n                        </tr>\n\n                    )})\n            }\n    };\n\n    const tableHead = () => {\n        if (languageContext === 'ENG') {\n            return (\n                <thead>\n                <tr>\n                    <th>Label</th>\n                    <th>Quantity</th>\n                    <th>Brand</th>\n                    <th>Score</th>\n                </tr>\n                </thead>\n            )\n        } else if (languageContext === 'HEB') {\n            return (\n                <thead>\n                <tr>\n                    <th>שם</th>\n                    <th>כמות</th>\n                    <th>מותג</th>\n                    <th>ציון</th>\n                </tr>\n                </thead>\n            )\n        }\n    };\n\n    const content = () => {\n        if(loading) {return (<Loader/>)}\n        else if (!data.length) {return (<NoData/>)}\n        else {\n            return (\n                <>\n                <Table>\n                    <table>\n                        {tableHead()}\n                        <tbody>\n                        {rows()}\n                        </tbody>\n                    </table>\n                </Table>\n                    </>\n            )\n        }\n    };\n\n    return (\n        <div className='betterProductsContainer'>\n            {title()}\n            <div className='betterProductsContent'>{content()}</div>\n        </div>\n    )\n};\n\nexport default BetterProducts;"]},"metadata":{},"sourceType":"module"}