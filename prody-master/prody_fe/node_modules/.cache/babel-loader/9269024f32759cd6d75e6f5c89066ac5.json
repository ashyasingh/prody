{"ast":null,"code":"import _slicedToArray from \"/Users/michellezyman/Projects/prody/prody-master/prody_fe/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/michellezyman/Projects/prody/prody-master/prody_fe/src/Console/ProductPage/SearchBar.js\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport { ConsoleContext } from '../ConsoleContext';\nimport './SearchBar.css';\nimport { useFetch } from \"../../utils/Hook\";\nimport Dropdown from \"../../componenets/Dropdown\";\nimport { useHistory } from \"react-router-dom\";\nimport authHeader from \"../../utils/auth-header\";\nimport { CONSTANTS } from '../../utils/constants';\n\nconst SearchBar = () => {\n  const _useContext = useContext(ConsoleContext),\n        marketContext = _useContext.marketContext,\n        productContext = _useContext.productContext,\n        setProductContext = _useContext.setProductContext;\n\n  const _useState = useState('1'),\n        _useState2 = _slicedToArray(_useState, 2),\n        productFilter = _useState2[0],\n        setProductFilter = _useState2[1];\n\n  const _useFetch = useFetch({\n    url: `${CONSTANTS.URL_PREFIX}://prody.me/api/product_page_product_dropdown/${marketContext}/${productFilter}`,\n    header: authHeader(),\n    method: 'GET',\n    dep1: productFilter\n  }),\n        data = _useFetch.data,\n        loading = _useFetch.loading;\n\n  const productsArray = () => {\n    if (!loading) {\n      return data.map(item => {\n        return {\n          value: item.barcode,\n          displayValue: item.barcode_desc_eng\n        };\n      });\n    } else {\n      return '';\n    }\n  }; // console.log(`searchBar: productContext: ${productContext} market: ${marketContext} productFilter: ${productFilter}`);\n  // console.log('searchBar - product  ' + product);\n\n\n  const history = useHistory();\n\n  const updateURL = product => {\n    history.push(`/productpage/${marketContext}/${product}`);\n  };\n\n  return React.createElement(\"div\", {\n    className: \"searchBarContainer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"searchBar_dropdown\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"searchBar_dropdown\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, React.createElement(Dropdown, {\n    listArray: productsArray(),\n    title: \"Product\",\n    loading: loading,\n    selectionValueHandler: setProductContext,\n    useDisplayValue: false,\n    filterHandler: setProductFilter,\n    defultValue: productContext,\n    updateURL: updateURL,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  })));\n};\n\nexport default SearchBar;","map":{"version":3,"sources":["/Users/michellezyman/Projects/prody/prody-master/prody_fe/src/Console/ProductPage/SearchBar.js"],"names":["React","useContext","useEffect","useState","ConsoleContext","useFetch","Dropdown","useHistory","authHeader","CONSTANTS","SearchBar","marketContext","productContext","setProductContext","productFilter","setProductFilter","url","URL_PREFIX","header","method","dep1","data","loading","productsArray","map","item","value","barcode","displayValue","barcode_desc_eng","history","updateURL","product","push"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,UAAf,EAA2BC,SAA3B,EAAsCC,QAAtC,QAAqD,OAArD;AAEA,SAASC,cAAT,QAA+B,mBAA/B;AACA,OAAO,iBAAP;AACA,SAAQC,QAAR,QAAuB,kBAAvB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,UAAP,MAAuB,yBAAvB;AACA,SAAQC,SAAR,QAAwB,uBAAxB;;AAEA,MAAMC,SAAS,GAAG,MAAM;AAAA,sBAEwCT,UAAU,CAACG,cAAD,CAFlD;AAAA,QAEZO,aAFY,eAEZA,aAFY;AAAA,QAEGC,cAFH,eAEGA,cAFH;AAAA,QAEmBC,iBAFnB,eAEmBA,iBAFnB;;AAAA,oBAGsBV,QAAQ,CAAC,GAAD,CAH9B;AAAA;AAAA,QAGbW,aAHa;AAAA,QAGEC,gBAHF;;AAAA,oBAIMV,QAAQ,CAAC;AAACW,IAAAA,GAAG,EAAG,GAAEP,SAAS,CAACQ,UAAW,iDAAgDN,aAAc,IAAGG,aAAc,EAA7G;AAC/BI,IAAAA,MAAM,EAAEV,UAAU,EADa;AAE/BW,IAAAA,MAAM,EAAE,KAFuB;AAG/BC,IAAAA,IAAI,EAAEN;AAHyB,GAAD,CAJd;AAAA,QAIZO,IAJY,aAIZA,IAJY;AAAA,QAINC,OAJM,aAINA,OAJM;;AASpB,QAAMC,aAAa,GAAG,MAAM;AACxB,QAAI,CAACD,OAAL,EAAc;AACV,aAAOD,IAAI,CAACG,GAAL,CAAUC,IAAD,IAAU;AACtB,eAAO;AAACC,UAAAA,KAAK,EAAED,IAAI,CAACE,OAAb;AAAsBC,UAAAA,YAAY,EAAEH,IAAI,CAACI;AAAzC,SAAP;AACH,OAFM,CAAP;AAGH,KAJD,MAIO;AAAC,aAAO,EAAP;AAAU;AACrB,GAND,CAToB,CAiBpB;AACA;;;AAEA,QAAMC,OAAO,GAAGvB,UAAU,EAA1B;;AAEA,QAAMwB,SAAS,GAAIC,OAAD,IAAa;AAC3BF,IAAAA,OAAO,CAACG,IAAR,CAAc,gBAAetB,aAAc,IAAGqB,OAAQ,EAAtD;AACH,GAFD;;AAIA,SACI;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAGI;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,QAAD;AACI,IAAA,SAAS,EAAET,aAAa,EAD5B;AAEI,IAAA,KAAK,EAAC,SAFV;AAGI,IAAA,OAAO,EAAED,OAHb;AAII,IAAA,qBAAqB,EAAET,iBAJ3B;AAKI,IAAA,eAAe,EAAE,KALrB;AAMI,IAAA,aAAa,EAAEE,gBANnB;AAOI,IAAA,WAAW,EAAEH,cAPjB;AAQI,IAAA,SAAS,EAAEmB,SARf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAHJ,CADJ;AAiBH,CA3CD;;AA6CA,eAAerB,SAAf","sourcesContent":["import React, {useContext, useEffect, useState} from 'react';\n\nimport { ConsoleContext } from '../ConsoleContext';\nimport './SearchBar.css'\nimport {useFetch} from \"../../utils/Hook\";\nimport Dropdown from \"../../componenets/Dropdown\";\nimport { useHistory } from \"react-router-dom\";\nimport authHeader from \"../../utils/auth-header\";\nimport {CONSTANTS} from '../../utils/constants';\n\nconst SearchBar = () => {\n\n    const { marketContext, productContext, setProductContext} = useContext(ConsoleContext);\n    const [productFilter, setProductFilter] = useState('1');\n    const { data, loading } = useFetch({url: `${CONSTANTS.URL_PREFIX}://prody.me/api/product_page_product_dropdown/${marketContext}/${productFilter}`,\n        header: authHeader(),\n        method: 'GET',\n        dep1: productFilter});\n\n    const productsArray = () => {\n        if (!loading) {\n            return data.map((item) => {\n                return {value: item.barcode, displayValue: item.barcode_desc_eng}\n            });\n        } else {return ''}\n    };\n\n    // console.log(`searchBar: productContext: ${productContext} market: ${marketContext} productFilter: ${productFilter}`);\n    // console.log('searchBar - product  ' + product);\n\n    const history = useHistory();\n\n    const updateURL = (product) => {\n        history.push(`/productpage/${marketContext}/${product}`);\n    };\n\n    return (\n        <div className=\"searchBarContainer\">\n            <div className=\"searchBar_dropdown\">\n            </div>\n            <div className=\"searchBar_dropdown\">\n                <Dropdown\n                    listArray={productsArray()}\n                    title='Product'\n                    loading={loading}\n                    selectionValueHandler={setProductContext}\n                    useDisplayValue={false}\n                    filterHandler={setProductFilter}\n                    defultValue={productContext}\n                    updateURL={updateURL}/>\n            </div>\n        </div>\n    );\n};\n\nexport default SearchBar;"]},"metadata":{},"sourceType":"module"}