{"ast":null,"code":"import _slicedToArray from\"/Users/shahafdan/Documents/BostonU/TAMID/prody/prody-master/prody_fe/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import'./App.css';import{BrowserRouter,Route,Switch,Redirect}from'react-router-dom';import{AppContext}from'./AppContext';import Login from'./Login/Login';import Console from'./Console/Console';var App=function App(){// const companySession = localStorage.getItem('company');\n// const [company, setCompany] = useState(companySession);\nvar _useState=useState(!!JSON.parse(localStorage.getItem('user'))),_useState2=_slicedToArray(_useState,2),isLoggedIn=_useState2[0],setIsLoggedIn=_useState2[1];useEffect(function(){var interval=setInterval(function(){var userStorage=JSON.parse(localStorage.getItem('user'));var now=Date.now();console.log(\"app \".concat(isLoggedIn));if(isLoggedIn){if(!userStorage||now>userStorage.expireAt){setIsLoggedIn(false);localStorage.clear();}}},10*60*1000);// 10 min\nreturn function(){return clearInterval(interval);};},[]);var routes=function routes(){if(!isLoggedIn){return React.createElement(Switch,null,React.createElement(Route,{path:\"/login\",component:Login}),React.createElement(Redirect,{to:{pathname:'/login'}}));}else{return React.createElement(Switch,null,React.createElement(Route,{path:\"/\",component:Console}),React.createElement(Redirect,{to:{pathname:'/'}}));}};// console.log(`app rendered`);\nreturn React.createElement(\"div\",{className:\"App\"},React.createElement(BrowserRouter,null,React.createElement(AppContext.Provider,{value:{isLoggedIn:isLoggedIn,setIsLoggedIn:setIsLoggedIn}},routes())),React.createElement(\"div\",{className:\"footer\"},\"Prody (C) All rights reserved\"));};export default App;","map":{"version":3,"sources":["/Users/shahafdan/Documents/BostonU/TAMID/prody/prody-master/prody_fe/src/App.js"],"names":["React","useEffect","useState","BrowserRouter","Route","Switch","Redirect","AppContext","Login","Console","App","JSON","parse","localStorage","getItem","isLoggedIn","setIsLoggedIn","interval","setInterval","userStorage","now","Date","console","log","expireAt","clear","clearInterval","routes","pathname"],"mappings":"uJAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,CACA,MAAO,WAAP,CACA,OAAQC,aAAR,CAAuBC,KAAvB,CAA8BC,MAA9B,CAAsCC,QAAtC,KAAqD,kBAArD,CAEA,OAASC,UAAT,KAA2B,cAA3B,CACA,MAAOC,CAAAA,KAAP,KAAkB,eAAlB,CACA,MAAOC,CAAAA,OAAP,KAAoB,mBAApB,CAEA,GAAMC,CAAAA,GAAG,CAAG,QAANA,CAAAA,GAAM,EAAM,CAEd;AACA;AAHc,cAIsBR,QAAQ,CAAC,CAAC,CAACS,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAH,CAJ9B,wCAIPC,UAJO,eAIKC,aAJL,eAMdf,SAAS,CAAC,UAAM,CACZ,GAAMgB,CAAAA,QAAQ,CAAGC,WAAW,CAAC,UAAM,CAC/B,GAAMC,CAAAA,WAAW,CAAGR,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAApB,CACA,GAAMM,CAAAA,GAAG,CAAGC,IAAI,CAACD,GAAL,EAAZ,CACAE,OAAO,CAACC,GAAR,eAAmBR,UAAnB,GACA,GAAIA,UAAJ,CAAgB,CACZ,GAAI,CAACI,WAAD,EAAgBC,GAAG,CAAGD,WAAW,CAACK,QAAtC,CAAgD,CAC5CR,aAAa,CAAC,KAAD,CAAb,CACAH,YAAY,CAACY,KAAb,GACH,CACJ,CACJ,CAV2B,CAUzB,GAAG,EAAH,CAAM,IAVmB,CAA5B,CAUgB;AAChB,MAAO,kBAAMC,CAAAA,aAAa,CAACT,QAAD,CAAnB,EAAP,CACH,CAbQ,CAaN,EAbM,CAAT,CAeA,GAAMU,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACjB,GAAI,CAACZ,UAAL,CAAiB,CACb,MACI,qBAAC,MAAD,MACI,oBAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,CAAqB,SAAS,CAAEP,KAAhC,EADJ,CAEI,oBAAC,QAAD,EAAU,EAAE,CAAE,CAAEoB,QAAQ,CAAE,QAAZ,CAAd,EAFJ,CADJ,CAKE,CANN,IAOK,CAAC,MACF,qBAAC,MAAD,MACI,oBAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,CAAgB,SAAS,CAAEnB,OAA3B,EADJ,CAEI,oBAAC,QAAD,EAAU,EAAE,CAAE,CAAEmB,QAAQ,CAAE,GAAZ,CAAd,EAFJ,CADE,CAKJ,CAEL,CAfD,CAiBA;AAEA,MACQ,4BAAK,SAAS,CAAC,KAAf,EACI,oBAAC,aAAD,MACI,oBAAC,UAAD,CAAY,QAAZ,EAAqB,KAAK,CAAE,CAAEb,UAAU,CAAVA,UAAF,CAAcC,aAAa,CAAbA,aAAd,CAA5B,EACCW,MAAM,EADP,CADJ,CADJ,CAMI,2BAAK,SAAS,CAAC,QAAf,kCANJ,CADR,CAYH,CApDD,CAsDA,cAAejB,CAAAA,GAAf","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport './App.css';\nimport {BrowserRouter, Route, Switch, Redirect} from 'react-router-dom';\n\nimport { AppContext } from './AppContext';\nimport Login from './Login/Login';\nimport Console from './Console/Console';\n\nconst App = () => {\n\n    // const companySession = localStorage.getItem('company');\n    // const [company, setCompany] = useState(companySession);\n    const [isLoggedIn, setIsLoggedIn] = useState(!!JSON.parse(localStorage.getItem('user')));\n\n    useEffect(() => {\n        const interval = setInterval(() => {\n            const userStorage = JSON.parse(localStorage.getItem('user'));\n            const now = Date.now();\n            console.log(`app ${isLoggedIn}`);\n            if (isLoggedIn) {\n                if (!userStorage || now > userStorage.expireAt) {\n                    setIsLoggedIn(false);\n                    localStorage.clear();\n                }\n            }\n        }, 10*60*1000); // 10 min\n        return () => clearInterval(interval);\n    }, []);\n\n    const routes = () => {\n        if (!isLoggedIn) {\n            return (\n                <Switch>\n                    <Route path=\"/login\" component={Login}/>\n                    <Redirect to={{ pathname: '/login'}} />\n                </Switch>\n            )}\n        else {return (\n            <Switch>\n                <Route path=\"/\" component={Console} />\n                <Redirect to={{ pathname: '/'}} />\n            </Switch>\n        )}\n\n    };\n\n    // console.log(`app rendered`);\n\n    return (\n            <div className=\"App\">\n                <BrowserRouter>\n                    <AppContext.Provider value={{ isLoggedIn, setIsLoggedIn }}>\n                    {routes()}\n                    </AppContext.Provider>\n                </BrowserRouter>\n                <div className=\"footer\">\n                    Prody (C) All rights reserved\n                </div>\n            </div>\n    );\n};\n\nexport default App;"]},"metadata":{},"sourceType":"module"}